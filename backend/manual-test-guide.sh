#!/bin/bash

echo "=== Pawfiler Services Manual Test Guide ==="
echo ""

echo "ğŸ“‹ ë°©ë²• 1: Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì§ì ‘ í™•ì¸"
echo "----------------------------------------"
echo ""
echo "1. Auth Service í…ŒìŠ¤íŠ¸:"
echo "   docker exec -it pawfiler-auth /bin/sh"
echo "   # ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í”„ë¡œì„¸ìŠ¤ í™•ì¸"
echo "   ps aux | grep auth-service"
echo ""

echo "2. Quiz Service í…ŒìŠ¤íŠ¸:"
echo "   docker exec -it pawfiler-quiz /bin/sh"
echo "   ps aux | grep quiz-service"
echo ""

echo "3. Community Service í…ŒìŠ¤íŠ¸:"
echo "   docker exec -it pawfiler-community /bin/sh"
echo "   ps aux | grep community-service"
echo ""

echo "4. Payment Service í…ŒìŠ¤íŠ¸:"
echo "   docker exec -it pawfiler-payment /bin/sh"
echo "   ps aux | grep payment-service"
echo ""

echo "5. Dashboard BFF í…ŒìŠ¤íŠ¸:"
echo "   docker exec -it pawfiler-dashboard-bff /bin/sh"
echo "   ps aux | grep dashboard-bff"
echo ""

echo "ğŸ“‹ ë°©ë²• 2: í¬íŠ¸ ì—°ê²° í™•ì¸"
echo "----------------------------------------"
echo ""
echo "ê° ì„œë¹„ìŠ¤ í¬íŠ¸ê°€ ì—´ë ¤ìˆëŠ”ì§€ í™•ì¸:"
echo ""

for port in 50051 50052 50053 50055 50056; do
    if nc -z localhost $port 2>/dev/null; then
        echo "âœ… Port $port is open"
    else
        echo "âŒ Port $port is closed"
    fi
done

echo ""
echo "ğŸ“‹ ë°©ë²• 3: ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸"
echo "----------------------------------------"
echo ""
echo "Auth Service ë¡œê·¸:"
echo "   docker logs -f pawfiler-auth"
echo ""
echo "Quiz Service ë¡œê·¸:"
echo "   docker logs -f pawfiler-quiz"
echo ""
echo "Community Service ë¡œê·¸:"
echo "   docker logs -f pawfiler-community"
echo ""
echo "Payment Service ë¡œê·¸:"
echo "   docker logs -f pawfiler-payment"
echo ""
echo "Dashboard BFF ë¡œê·¸:"
echo "   docker logs -f pawfiler-dashboard-bff"
echo ""

echo "ğŸ“‹ ë°©ë²• 4: grpcurl ì„¤ì¹˜ ë° ì‚¬ìš© (ê¶Œì¥)"
echo "----------------------------------------"
echo ""
echo "grpcurl ì„¤ì¹˜:"
echo "   # Linux"
echo "   wget https://github.com/fullstorydev/grpcurl/releases/download/v1.8.9/grpcurl_1.8.9_linux_x86_64.tar.gz"
echo "   tar -xvf grpcurl_1.8.9_linux_x86_64.tar.gz"
echo "   sudo mv grpcurl /usr/local/bin/"
echo ""
echo "   # Windows (PowerShell)"
echo "   choco install grpcurl"
echo ""
echo "ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (reflection í™œì„±í™” í•„ìš”):"
echo "   grpcurl -plaintext localhost:50051 list"
echo "   grpcurl -plaintext localhost:50052 list"
echo ""

echo "ğŸ“‹ ë°©ë²• 5: ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸"
echo "----------------------------------------"
echo ""
echo "PostgreSQL ì ‘ì†:"
echo "   docker exec -it pawfiler-postgres psql -U pawfiler -d pawfiler"
echo ""
echo "í…Œì´ë¸” í™•ì¸:"
echo "   \\dt"
echo ""

echo "ğŸ“‹ ë°©ë²• 6: Kafka í™•ì¸"
echo "----------------------------------------"
echo ""
echo "Kafka í† í”½ ëª©ë¡:"
echo "   docker exec pawfiler-kafka kafka-topics --list --bootstrap-server localhost:9092"
echo ""

echo "=== í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ ìƒíƒœ ==="
docker ps --filter "name=pawfiler" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
